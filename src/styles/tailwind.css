@tailwind base;
@tailwind components;
@tailwind utilities;

/* Design tokens - dark-first (default). Light mode is enabled by adding .light to <html> */
:root {
  /* Colors - dark */
  --bg: #0B0F14;
  --fg: #E5E7EB;
  --border: #1F2937;
  --muted: #94A3B8;
  /* Backwards-compat aliases */
  --surface: #0F1520;
  --panel: #111827;
  --accent: #60A5FA;
  --accent-hover: #3B82F6;
  --accent-2: #22D3EE;
  --danger: #F87171;
  --warning: #FBBF24;
  --success: #34D399;
  --fg-muted: #9CA3AF;

  /* New card tokens */
  --card: #0F1520;   /* primary surface */
  --card-2: #111827; /* secondary surface */

  /* Primary palette tints (alpha-like scales) */
  --primary: #60A5FA;   /* main */
  --primary-a10: rgba(96,165,250,0.10);
  --primary-a20: rgba(96,165,250,0.20);
  --primary-a30: rgba(96,165,250,0.30);
  --primary-a40: rgba(96,165,250,0.40);
  --primary-a50: rgba(96,165,250,0.50);
  --primary-a60: rgba(96,165,250,0.60);

  /* Semantic palettes */
  --success-a10: rgba(52,211,153,0.10);
  --success-a20: rgba(52,211,153,0.20);
  --success-a30: rgba(52,211,153,0.30);
  --warning-a10: rgba(251,191,36,0.10);
  --warning-a20: rgba(251,191,36,0.20);
  --warning-a30: rgba(251,191,36,0.30);
  --danger-a10:  rgba(248,113,113,0.10);
  --danger-a20:  rgba(248,113,113,0.20);
  --danger-a30:  rgba(248,113,113,0.30);
  --info-a10:    rgba(34,211,238,0.10);
  --info-a20:    rgba(34,211,238,0.20);
  --info-a30:    rgba(34,211,238,0.30);

  /* Radii */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;
  --radius-2xl: 24px;

  /* Elevation */
  --shadow-sm: 0 1px 2px rgba(0,0,0,0.04);
  --shadow-md: 0 6px 18px rgba(0,0,0,0.25);
  --shadow-lg: 0 10px 30px rgba(0,0,0,0.35);

  /* Motion */
  --motion-duration: 180ms;
  --motion-ease: cubic-bezier(.2,.8,.2,1);
}

/* Light mode overrides */
.light {
  --bg: #F7FAFC;
  --fg: #0F172A;
  --border: #E5E7EB;
  --muted: #64748B;
  /* Backwards-compat aliases */
  --surface: #FFFFFF;
  --panel: #F3F4F6;
  --fg-muted: #475569;
  --accent: #2563EB;
  --accent-hover: #1D4ED8;
  --accent-2: #06B6D4;
  --danger: #DC2626;
  --warning: #D97706;
  --success: #059669;

  /* New card tokens */
  --card: #FFFFFF;
  --card-2: #F3F4F6;

  /* Primary palette tints */
  --primary: #2563EB;
  --primary-a10: rgba(37,99,235,0.10);
  --primary-a20: rgba(37,99,235,0.20);
  --primary-a30: rgba(37,99,235,0.30);
  --primary-a40: rgba(37,99,235,0.40);
  --primary-a50: rgba(37,99,235,0.50);
  --primary-a60: rgba(37,99,235,0.60);

  /* Semantic palettes */
  --success-a10: rgba(5,150,105,0.10);
  --success-a20: rgba(5,150,105,0.20);
  --success-a30: rgba(5,150,105,0.30);
  --warning-a10: rgba(217,119,6,0.10);
  --warning-a20: rgba(217,119,6,0.20);
  --warning-a30: rgba(217,119,6,0.30);
  --danger-a10:  rgba(220,38,38,0.10);
  --danger-a20:  rgba(220,38,38,0.20);
  --danger-a30:  rgba(220,38,38,0.30);
  --info-a10:    rgba(6,182,212,0.10);
  --info-a20:    rgba(6,182,212,0.20);
  --info-a30:    rgba(6,182,212,0.30);
}

@layer base {
  html { color-scheme: dark light; font-size: 16px }
  body {
    background: var(--bg);
    color: var(--fg);
    font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-feature-settings: "ss01" 1, "cv02" 1;
  }

  /* Prefers reduced motion */
  @media (prefers-reduced-motion: reduce) {
    * { transition-duration: 0ms !important; animation-duration: 0ms !important }
  }
}

@layer components {
  /* Card recipe */
  .card {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: var(--radius-2xl);
    padding: 1.5rem; /* 24px */
    box-shadow: var(--shadow-sm);
    transition: box-shadow var(--motion-duration) var(--motion-ease), transform var(--motion-duration) var(--motion-ease);
  }
  .card:hover { box-shadow: var(--shadow-md) }
  .card--compact { padding: 1rem }

  /* Buttons */
  .btn { display: inline-flex; align-items: center; gap: 0.5rem; border-radius: 9999px; font-weight: 500; user-select: none; transition: all var(--motion-duration) var(--motion-ease); }
  .btn:active { transform: translateY(1px) }
  .btn--sm { padding: 0.375rem 0.75rem } /* px-3 py-1.5 */
  .btn--md { padding: 0.5rem 1rem } /* px-4 py-2 */
  .btn--lg { padding: 0.625rem 1.25rem } /* px-5 py-2.5 */
  .btn--primary { background: var(--accent); color: var(--bg) }
  .btn--primary:hover { background: var(--accent-hover) }
  .btn--outline { background: transparent; border: 1px solid var(--accent); color: var(--accent) }
  .btn--ghost { background: transparent; color: var(--fg) }

  /* Inputs */
  .input, .select, .number { background: var(--panel); border: 1px solid var(--border); color: var(--fg); padding: 0.5rem 0.75rem; border-radius: var(--radius-xl); height: 40px }
  .input::placeholder { color: var(--fg-muted) }
  .input:focus, .select:focus, .number:focus { outline: none; box-shadow: 0 0 0 3px rgba(96,165,250,0.12); border-color: var(--accent) }
  .input--error { border-color: var(--danger) }

  /* Chip / Toggle */
  .chip { background: var(--panel); color: var(--fg); padding: 0.25rem 0.5rem; border-radius: 9999px }
  .chip--selected { background: var(--accent-2); color: #0B0F14 }

  /* Topbar */
  .topbar { position: sticky; top: 0; backdrop-filter: blur(6px); background: rgba(15,21,32,0.6); border-bottom: 1px solid var(--border); height: 56px; display:flex; align-items:center }

  /* Sidebar */
  .sidebar { width: 280px; border-right: 1px solid var(--border); overflow: auto }

  /* Table (BOM) */
  .table { width: 100%; border-collapse: collapse }
  .table th { background: var(--surface); position: sticky; top: 56px; z-index: 10 }
  .table tr { height: 44px }
  .table tr:nth-child(even) td { background: rgba(255,255,255,0.01) }

  /* Stepper */
  .stepper__step { display:flex; gap:0.75rem; align-items:center }
  .stepper__dot { width:12px; height:12px; border-radius:9999px; background: var(--muted) }
  .stepper__dot--active { background: var(--accent) }

  /* Focus visible utility */
  .focus-ring:focus-visible { box-shadow: 0 0 0 3px rgba(96,165,250,0.18), inset 0 0 0 1px var(--border) }
}

@layer utilities {
  .rounded-2xl { border-radius: var(--radius-2xl) }
}
